# vtobjplugin

[中文文档](README_ZH.md)

Virtools Obj Plugin.

An interface plugin of Virtools which allows you to export some models as `.obj` file.

Support Virtools 3.5 and 5.0

## Features

### Advantages

* Can omit world matrix (better than vt2obj. Omiting world matrix will omit object's move, rotation and scale).
* Support Blender and 3ds Max's repostion script for placing object (Place each object with the correct status in 3d software when you omit world matrix)
* Better right-hand left-hand coordinate system conversion. (From fliping Z axis to swaping YZ axis. This is more suit for Blender and 3ds Max 3d system)
* More material export options
* Comparing with vt2obj, it support Virtools 3.5. It is convenient for Ballance object operation.
* Support *one file per object*. It is convenient for exporting object component.

### Shortcomings

* Right-hand left-hand coordinate system conversion only support swaping YZ axis.
* Use group to split each object and don't provide any option for changing this.
* No smooth group
* Only export 3d object. Don't support 2 dimension structure such as Line and etc.

## Usage

1. Put plugin dll into Virtools's `InterfacePlugins` folder
1. Launch Virtools and open the document which you want to export objects from.
1. According to your need, considering whether you need do some extra operations.
1. Click menu`Vtobj`-`Export object`。
1. Set all options in dialog and click OK to export objects.

## Export config description

### General Setting

* Export mode: `An object`, `A group` and `All`. For `An object` and `A group`, you should pick a item in following Combobox.
* File mode: `All objects in one file` and `One file per object`. For the first option, file will be named as `all`. For the second option, file name is object name. This option only affect obj and mtl files' count.
* Export folder：It should be a existed folder. And you should pay attention to that the conflict file will be overwritten directly.

### Object Setting

* Omit object transform data: Suggest check. This option is only served for the compability with original `vt2obj`.
* Convert to right-hand coordinate system: Convert to Blender and 3ds Max's coordinate system.
* Add name prefix: Add a unique name prefix to avoid name conflict.

### Reposition Script

If you don't check `Omit object transform data` or `Convert to right-hand coordinate system`, this sector's options are disabled.

Repostion means that restore object's original move, rotation and scale.

* Generate 3ds Max script (3dsmax.ms)
* Generate Blender script (blender.py)

### Material Setting

* Export mtl file: If you don't check it, the following options are disabled.
* Export texture map in mtl: If you don't check it, all object's texture will be omitted and only keep light effect, such as reflect rate. And following options are disabled.
* Copy texture file: Copy texture into your export folder. If you have existing texture folder, you can close this option to reduce the usage of storages and reduce useless IO operation.
* Custom texture map format: If you check this and write a new suffix, all texture will be change to new format.

## Import tips

There are some tips for importing obj files generated by this plugin in 3ds Max and Blender. Following tips is under default setting (the initial settings when you first launch this plugin)

### Blender

* Choose Y forward, Z up (same as Blender default system)
* Check Image search
* Check Group in Split

For reposition, load script file `blender.py` in Scripting tab and run it.

### 3ds Max

* Do not check Flip YZ Axis
* For normals, select imported from file
* Check import material

For reposition, Click MAXScript-Run script in menu. Select `3dsmax.ms` and run it.

## Build

This project have 2 configuration which corresponding with Virtools 3.5 and 5.0. It need their corresponding Virtools SDK to build.

Project configuration have too much absolute path. For beginner, it is hard to build this project.

It is strongly not recommended that you compile by yourself unless you know Virtools SDK very well.

## Develop plan

Current version is v1.3. There are no plan for futher development.